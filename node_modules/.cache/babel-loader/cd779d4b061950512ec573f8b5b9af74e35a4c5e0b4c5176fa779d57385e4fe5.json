{"ast":null,"code":"var _jsxFileName = \"/Users/mike/Projects/react-conversational-form-example-bgnaje/src/myForm.js\";\nimport React from 'react';\nimport { ConversationalForm } from 'conversational-form';\nimport { OPENAI_API_KEY } from './.env';\nimport python from 'python-bridge';\nimport { spawn } from 'child_process';\nimport { join } from 'path';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class MyForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.formFields = [{\n      'tag': 'input',\n      'type': 'text',\n      'name': 'firstname',\n      'cf-questions': 'What is your firstname?'\n    }, {\n      'tag': 'input',\n      'type': 'text',\n      'name': 'lastname',\n      'cf-questions': 'What is your lastname?'\n    }];\n    this.submitCallback = this.submitCallback.bind(this);\n    this.py = new python();\n    this.py.expose({\n      chain: (firstname, lastname) => {\n        return {\n          answer: `Hello ${firstname} ${lastname}`,\n          sources: 'local'\n        };\n      }\n    });\n  }\n  componentDidMount() {\n    this.cf = ConversationalForm.startTheConversation({\n      options: {\n        submitCallback: this.submitCallback,\n        preventAutoFocus: true\n        // loadExternalStyleSheet: false\n      },\n\n      tags: this.formFields\n    });\n    this.elem.appendChild(this.cf.el);\n  }\n  submitCallback() {\n    var formDataSerialized = this.cf.getFormData(true);\n    const firstname = formDataSerialized.firstname;\n    const lastname = formDataSerialized.lastname;\n    const script = spawn('python', ['./qa.py', firstname, lastname]);\n    script.stdout.on('data', data => {\n      this.cf.addRobotChatResponse(`Answer: ${data}\\nSources: local`);\n    });\n    script.stderr.on('data', data => {\n      console.error(`Error: ${data}`);\n    });\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: ref => this.elem = ref\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this);\n  }\n}","map":{"version":3,"names":["React","ConversationalForm","OPENAI_API_KEY","python","spawn","join","MyForm","Component","constructor","props","formFields","submitCallback","bind","py","expose","chain","firstname","lastname","answer","sources","componentDidMount","cf","startTheConversation","options","preventAutoFocus","tags","elem","appendChild","el","formDataSerialized","getFormData","script","stdout","on","data","addRobotChatResponse","stderr","console","error","render","ref"],"sources":["/Users/mike/Projects/react-conversational-form-example-bgnaje/src/myForm.js"],"sourcesContent":["import React from 'react';\nimport { ConversationalForm } from 'conversational-form';\nimport { OPENAI_API_KEY } from './.env';\nimport python from 'python-bridge';\nimport { spawn } from 'child_process';\nimport { join } from 'path';\n\nexport default class MyForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.formFields = [\n      {\n        'tag': 'input',\n        'type': 'text',\n        'name': 'firstname',\n        'cf-questions': 'What is your firstname?'\n      },\n      {\n        'tag': 'input',\n        'type': 'text',\n        'name': 'lastname',\n        'cf-questions': 'What is your lastname?'\n      }\n    ];\n    \n    this.submitCallback = this.submitCallback.bind(this);\n    this.py = new python();\n    this.py.expose({\n      chain: (firstname, lastname) => {\n        return { answer: `Hello ${firstname} ${lastname}` , sources: 'local' };\n      }\n    });\n  }\n  \n  componentDidMount() {\n    this.cf = ConversationalForm.startTheConversation({\n      options: {\n        submitCallback: this.submitCallback,\n        preventAutoFocus: true,\n        // loadExternalStyleSheet: false\n      },\n      tags: this.formFields\n    });\n    this.elem.appendChild(this.cf.el);\n  }\n  \n  submitCallback() {\n    var formDataSerialized = this.cf.getFormData(true);\n    const firstname = formDataSerialized.firstname;\n    const lastname = formDataSerialized.lastname;\n\n    const script = spawn('python', ['./qa.py', firstname, lastname]);\n\n    script.stdout.on('data', (data) => {\n      this.cf.addRobotChatResponse(`Answer: ${data}\\nSources: local`);\n    });\n\n    script.stderr.on('data', (data) => {\n      console.error(`Error: ${data}`);\n    });\n  }\n  \n  render() {\n    return (\n      <div>\n        <div\n          ref={ref => this.elem = ref}\n        />\n      </div>\n    );\n  }\n}\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,kBAAkB,QAAQ,qBAAqB;AACxD,SAASC,cAAc,QAAQ,QAAQ;AACvC,OAAOC,MAAM,MAAM,eAAe;AAClC,SAASC,KAAK,QAAQ,eAAe;AACrC,SAASC,IAAI,QAAQ,MAAM;AAAC;AAE5B,eAAe,MAAMC,MAAM,SAASN,KAAK,CAACO,SAAS,CAAC;EAClDC,WAAW,CAACC,KAAK,EAAE;IACjB,KAAK,CAACA,KAAK,CAAC;IACZ,IAAI,CAACC,UAAU,GAAG,CAChB;MACE,KAAK,EAAE,OAAO;MACd,MAAM,EAAE,MAAM;MACd,MAAM,EAAE,WAAW;MACnB,cAAc,EAAE;IAClB,CAAC,EACD;MACE,KAAK,EAAE,OAAO;MACd,MAAM,EAAE,MAAM;MACd,MAAM,EAAE,UAAU;MAClB,cAAc,EAAE;IAClB,CAAC,CACF;IAED,IAAI,CAACC,cAAc,GAAG,IAAI,CAACA,cAAc,CAACC,IAAI,CAAC,IAAI,CAAC;IACpD,IAAI,CAACC,EAAE,GAAG,IAAIV,MAAM,EAAE;IACtB,IAAI,CAACU,EAAE,CAACC,MAAM,CAAC;MACbC,KAAK,EAAE,CAACC,SAAS,EAAEC,QAAQ,KAAK;QAC9B,OAAO;UAAEC,MAAM,EAAG,SAAQF,SAAU,IAAGC,QAAS,EAAC;UAAGE,OAAO,EAAE;QAAQ,CAAC;MACxE;IACF,CAAC,CAAC;EACJ;EAEAC,iBAAiB,GAAG;IAClB,IAAI,CAACC,EAAE,GAAGpB,kBAAkB,CAACqB,oBAAoB,CAAC;MAChDC,OAAO,EAAE;QACPZ,cAAc,EAAE,IAAI,CAACA,cAAc;QACnCa,gBAAgB,EAAE;QAClB;MACF,CAAC;;MACDC,IAAI,EAAE,IAAI,CAACf;IACb,CAAC,CAAC;IACF,IAAI,CAACgB,IAAI,CAACC,WAAW,CAAC,IAAI,CAACN,EAAE,CAACO,EAAE,CAAC;EACnC;EAEAjB,cAAc,GAAG;IACf,IAAIkB,kBAAkB,GAAG,IAAI,CAACR,EAAE,CAACS,WAAW,CAAC,IAAI,CAAC;IAClD,MAAMd,SAAS,GAAGa,kBAAkB,CAACb,SAAS;IAC9C,MAAMC,QAAQ,GAAGY,kBAAkB,CAACZ,QAAQ;IAE5C,MAAMc,MAAM,GAAG3B,KAAK,CAAC,QAAQ,EAAE,CAAC,SAAS,EAAEY,SAAS,EAAEC,QAAQ,CAAC,CAAC;IAEhEc,MAAM,CAACC,MAAM,CAACC,EAAE,CAAC,MAAM,EAAGC,IAAI,IAAK;MACjC,IAAI,CAACb,EAAE,CAACc,oBAAoB,CAAE,WAAUD,IAAK,kBAAiB,CAAC;IACjE,CAAC,CAAC;IAEFH,MAAM,CAACK,MAAM,CAACH,EAAE,CAAC,MAAM,EAAGC,IAAI,IAAK;MACjCG,OAAO,CAACC,KAAK,CAAE,UAASJ,IAAK,EAAC,CAAC;IACjC,CAAC,CAAC;EACJ;EAEAK,MAAM,GAAG;IACP,oBACE;MAAA,uBACE;QACE,GAAG,EAAEC,GAAG,IAAI,IAAI,CAACd,IAAI,GAAGc;MAAI;QAAA;QAAA;QAAA;MAAA;IAC5B;MAAA;MAAA;MAAA;IAAA,QACE;EAEV;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}